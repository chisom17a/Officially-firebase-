<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chiearn Hub - Admin Panel</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif}
body{display:flex;background:#f2f5fb;min-height:100vh}
.sidebar{
  width:260px;background:#1e293b;color:#fff;
  position:fixed;left:-260px;top:0;height:100%;
  padding:25px 20px;transition:.3s
}
.sidebar.active{left:0}
.sidebar h2{text-align:center;margin-bottom:25px}
.sidebar a{
  display:block;padding:12px 15px;color:#cbd5e1;
  text-decoration:none;border-radius:6px;margin-bottom:8px
}
.sidebar a:hover{background:#334155}
.logout-btn{
  margin-top:20px;padding:12px;background:#ef4444;
  color:#fff;border:none;width:100%;border-radius:6px;cursor:pointer
}
.main{width:100%;padding:30px;transition:.3s}
.main.shifted{margin-left:260px}
.top-bar{
  display:flex;justify-content:space-between;
  align-items:center;margin-bottom:25px
}
.hamburger{
  font-size:24px;cursor:pointer;
  background:#fff;padding:8px 12px;
  border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,.1)
}
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px
}
.card{
  background:#fff;padding:20px;border-radius:12px;
  box-shadow:0 4px 12px rgba(0,0,0,.06)
}
.card h3{font-size:16px}
.card p{font-size:22px;font-weight:700}
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <h2>Admin Panel</h2>
  <a href="user.html">Users</a>
  <a href="adcony.html">Ad Approval</a>
  <a href="admin-task-review.html">Task Approval</a>
  <a href="balcony.html">Balance Control</a>
  <a href="supportline.html">Support</a>
  <a href="taskmaster.html">Tasks</a>
  <a href="update.html">Updates</a>
  <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<!-- MAIN -->
<div class="main" id="main">

  <div class="top-bar">
    <span class="hamburger" onclick="toggleSidebar()">â˜°</span>
    <h1 id="adminWelcome">Welcome, Admin</h1>
  </div>

  <div class="cards">
    <div class="card"><h3>Total Users</h3><p id="totalUsers">0</p></div>
    <div class="card"><h3>Earners</h3><p id="earnersCount">0</p></div>
    <div class="card"><h3>Advertisers</h3><p id="advertisersCount">0</p></div>
    <div class="card"><h3>Admins</h3><p id="adminsCount">0</p></div>
  </div>

</div>

<script>
/* AUTH */
const currentUser = JSON.parse(localStorage.getItem("currentUser"));
const users = JSON.parse(localStorage.getItem("users")) || [];

if(!currentUser || currentUser.model !== "Admin"){
  location.href="login.html";
}

document.getElementById("adminWelcome").innerText =
  `Welcome, ${currentUser.username || currentUser.email}`;

/* SIDEBAR */
function toggleSidebar(){
  sidebar.classList.toggle("active");
  main.classList.toggle("shifted");
}

/* STATS */
totalUsers.innerText = users.length;
earnersCount.innerText = users.filter(u=>u.model==="Earner").length;
advertisersCount.innerText = users.filter(u=>u.model==="Advertiser").length;
adminsCount.innerText = users.filter(u=>u.model==="Admin").length;

/* LOGOUT */
function logout(){
  localStorage.removeItem("currentUser");
  location.href="login.html";
}
</script>

</body>
</html>